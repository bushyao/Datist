.. log

20140620
======================

1、自动保存，重新打开

2、选中样式

3、关于

4、退出提示

6、全局异常控制

7、复制与粘贴的详细日志

8、自动保存写入日志

9、流程窗口，超节点复制

10、清空插件时，提示

11、自动恢复，在窗口

12、文件菜单的BUG，退出时日志窗口

13、重做的视图

14、日志大小控制

15、加载函数日志调整

16、流程窗口中加号不刷新bug，

17、撤消后的交互

18、版本号

19、在流程面板中，选中流程或超节点的样式，失去焦点的样式

20、保存流程时，卡死（JoGiS）

21、流程面板与流程编辑区块的交互Bug；
当流程中存在多个超节点的嵌套时，超节点的子超节点在流程编辑区块操作时，不能与流程区块同步

22、关于窗口

23、将文件菜单的图标换成名称

24、退出提出 更合理，打开不做任何操作时，不提示。

25、优化工程右键菜单，在空白工程时，添加文件夹、重命名、删除、添加流程

26、Excel表单节点，加载过程中多加载一个行数据问题（取读方式不明确）导致压汞曲线绘制节点，不出结果。

27、第一次进入，在节点上，点右键菜单时，部分菜单项为灰色不可用问题（系统的Command必须获得焦点，才更新状态）

28、流程管理面板，改为单击切换流程区的内容（使用过程中，好像需要用力点，才能切换流程的展示的bug）

29、ODBC连接密码，多次询问问题（密码可用状态未更新引发）

30、流程区与流程管理面板的交互功能，撤消后流程不能交互（bug）

31、地质图版，撤消时，节点标记显示为空的Bug

32、过滤、合并节点，字段名称合法性验证(bug)

33、右键菜单不显示(bug)

34、Value_at函数不能取列表第一个值的(bug)

35、压汞曲线节点

36、当合并节点修改后 未删除后续数据

37、浏览数据节点；

* 优化自动列宽算法，使之显示更合理
* 优化编辑器界面逻辑，当设置为自动列宽时，将列宽列设置为不可用
* 在浏览器中，保存列宽定义信息，以便下次执行时，使用此次修改的列宽定义
* 在浏览器中，新增自适应行高切换功能，当单元格的宽度不足以显示文字内容时，行高将自动加大以显示单元格中所有内容

38、新列节点；
系统自动将值转化为设置类型，UnKnown类型不进行类型的转换；
系统默认的类型为UnKnown；

39、自定义函数

* 新增to_bool，将值转化为布尔型值。真值：True、不为零的整数或实数；假值：False、0、0.0。
* 新增to_fieldname，将指定Item标准化为系统支持的字段名称。

40、行值转列；
行值满足字段名命名规范时，不能输出结果的bug。（之前使用值替换节点辅助实现）；
完善后，先将行值进行字段命名的规范化，再进行值转换。

41、行序节点编辑器；
新增右键菜单，对字段进行排序，包括全部字段正序、逆序，选中字段正序、逆序；
新增选中字段向上移动一格或向下移动一格的按钮功能

41、调整异常跟踪机制；
程序异常时，不弹出异常窗口，只记录在日志文件中

42、系统支持的路径扩展；
目前支持：$examples$，为程序所在目录的同级的Examples目录，用于放置系统的示例数据。
$stream$，为当前流程所在的目录。
支持文件夹对话框打开之前的定位、选取之后向系统路径的变换。
智能解析、Excel表单、GIS分析、GIS数据源、TXT数据源、FilePicker

43、屏蔽NodeSuperInput、NodeSuperOutput双击的后运行报告栏中，编辑器不存在的提示。

44、新增超节点层级导航条，便于用户了解当前所处的超节点位置；
系统记忆导航条是否显示；
单击按键导航至指定的层级；
导航条定位与流程窗口关联交互

45、工程列表中，搜索后，列表界面高亮格式修改，以黄色为背景。

46、智能解析：字段定义，对应关系

47、智能解析节点：编辑器优化

48、求字符串长度

49、正则表达式

50、向下取值

51、FastReport支持多个数据；合并多个Excel的Sheet页

52、用户类型：未授权用户、授权用户、测试用户（权限最大）

53、智能解析模板制作

* 根据选中的内容，按列定义字段名
* 模板制作过程，字段名批量修改，Grid
* 批量替换文字
* 批量修改字段的类型
* 模板制作过程，字段名与列配对，采用最长公共子串算；若最长子串有多个时，取最短的列；
* 核心算法，字段名匹配删除不可见的内容

54、格式化报表节点、文件导出节点，支持多个表单输出同一Excel文件中

* 是否浏览结果（若文件已打开，报文件已占用的错误。）
* 定义文件位置
* 定义表单名称
* 删除已有表单（ 判断Excel文件中表单名是否存在；若表单存在：根据条件是否删除表单，是则覆盖表单内容；否则重命名指定的表单名，追加内容到Excel文件中；）
* 新插入的表单，在最后面
* 格式化报表节点的表单命名，仅针对它的第一个表单，其它表单无效

操作技巧： 当前节点最后运行，使用过程中，将多个输出节点选中后，把需要浏览结果的节点，设置为当前节点即可（单击节点）。

55、多个输出节点同时运行，输出平铺布局优化；
对于不可见的输出节点，或设置为不可见的输出节点，不占平铺窗口的位置，使平铺效果更好。

56、对于输出节点接口，新增预处理函数；
在读取数据之前，首先执行预处理函数，主要解决数据异步加载带来的执行顺序颠倒的问题。

57、流程属性默认设置；

* 作者：当前计算机名称，修改原有作者为BC不能修改的Bug；
* 版本：当前日期；

58、数据安全，对运行过程中产生的中间数据进行加密存储；加密与计算机的硬盘号绑定，使得中间数据随运行环境的变化而变化，不可以在不同的计算机之间的复制使用。 

修改：运行框架、 数据源节点、数据库输出节点内容

59、其它

* 修改多个WinForm输出窗口的图标，使之与程序的图标一致；
* 工程保存快捷键Alt+S；（保存结果，运行报告中有提示）
* 空间数据源底图不能显示的Bug；
* 列序节点编辑器，由字段选中状态，决定右侧的置顶、上一格、下一格、置底按钮的可用与否；

60、主窗体关闭后，系统不能关闭的Bug。

61、未插入UKey退出后，程序仍驻留进程的bug。

62、在菜单的编辑页中，新增公式编辑器，具有代码提示功能。

63、代码编辑器

* 提示，重载提示
* 自动完成
* 高亮
* 括号匹配

64、架构，采用后台进程运行流程;
解决界面挂起问题，当流程运行过程中，界面不会卡死，进展条中旋转进度，会不停地旋转；

65、效率，提升数据库数据源访问的效率

对10条记录*110列的井基本信息进行处理。

优化前：1468.653秒（25分钟）::

   [2014-06-19 02:22:58:564]   【启动】 数据源(井基本信息)
   [2014-06-19 02:23:14:679]   Read: 2000 / 98674
   [2014-06-19 02:47:27:217]   【完成】 数据源(井基本信息) T

优化后：130.153秒（2分钟）::

   [2014-06-23 12:43:22:494]   【启动】 数据源(井基本信息)
   [2014-06-23 12:43:46:159]   Read: 9867 / 98675 (10.00%)
   [2014-06-23 12:45:32:647]   【完成】 数据源(井基本信息) T

环境，Oracle数据库，WIFI，WIndows7 4核 i7-3520M,8.00G,64位

66、缓存逻辑;
节点缓存，缓存数据和字典，在访问过程中，不从其前节点取数据字典。

67、执行状态，新增流程正在执行状态

* 当流程开始执行时，进入正在执行状态；
* 当运行结束，退出状态；
* 当运行过程中系统异常时，退出状态。

进入正在执行状态后，当前流程右键不可用，数据执行引擎中的数据表及视图不可删除；但节点属性可编辑，但不会影响执行结果；

68、开发陷井，优化“行值转列值”节点，
修改后，在运行状态下，取值生成字段名模块，不检查前节点的逻辑（检查，会删除数据执行引擎中的所有数据，包括：缓存、物理表、视图；导致数据执行引擎重复运算），提高运行效率。
 
69、完善执行逻辑，运行成功显示运行结果；运行失败显示信息提示窗口。

70、Excel解析优化，多线程执行方案无法提高运行速度，反而花费更多的时间; 采用模板最佳匹配法

优化前：147.23秒::

   [2014-06-19 10:48:03:801]   【启动】 物性报告解析(物性报告解析)
   [2014-06-19 10:48:08:586]   解析Excel: 10/319
   [2014-06-19 10:50:31:031]   【完成】 物性报告解析(物性报告解析) T

优化后：126秒::

   [2014-06-25 01:59:00.474]   【启动】<物性报告解析>
   [2014-06-25 01:59:22.018]   解析Excel: 50/319 15.67%
   [2014-06-25 02:01:06.897]   【完成】<物性报告解析> T

71、Suffer软件接口

支持仅查看图片、数据推送两种应用模式：

* 仅查看图片模式，用户不到Suffer软件的开启，直接输出看到绘图的结果；
* 数据推送模式，将流程中的数据推送到Suffer软件中，并自动进行一系列的操作；

功能：

* 编辑器中指定Suffer绘制等值线的坐标列及值列；
* 用户可以不指定白化边界、底图文件、标记文件、色标文件；
* 系统自动扫描数据空间范围，限定绘图区域，数据空间范围向外扩展10%的宽度及高度，网格数为200*200；
* 默认标记的符号设置为“□”；

72、信息图节点，内存网站服务器：

* 数据访问过程、复制过程忽略大小写的区别；

* 数据访问过程支持文件夹下未指定浏览文件时的默认文件重定向

73、节点编辑器中，当文件路径为空时，点击打开文件按键，系统报“程序异常: 路径的形式不合法。”的问题；增加对文件路径的合法性验证。

74、日志、报告，规范化输出日期格式秒和毫秒之间；将原来的“：”修改为“.”

75、文件菜单帮助页，显示当前主程序的版本号。

76、简化日志输出，关闭节点启动日志。

77、程序异常时，进度条不关闭的Bug

78、脚本数据源节点
 